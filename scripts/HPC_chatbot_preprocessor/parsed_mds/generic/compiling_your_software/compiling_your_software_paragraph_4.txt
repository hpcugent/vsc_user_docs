It seems to work, now run it on the HPC
qsub hello.pbs
Compiling a parallel program in C/MPI
cd ~/examples/Compiling-and-testing-your-software-on-the-HPC
List the directory and explore the contents of the "mpihello.c"
program:
$ ls -l
total 512
total 512
-rw-r--r-- 1 vsc40000 214 Sep 16 09:42 hello.c
-rw-r--r-- 1 vsc40000 130 Sep 16 11:39 hello.pbs*
-rw-r--r-- 1 vsc40000 359 Sep 16 13:55 mpihello.c
-rw-r--r-- 1 vsc40000 304 Sep 16 13:55 mpihello.pbs
/*
 * VSC        : Flemish Supercomputing Centre
 * Tutorial   : Introduction to HPC
 * Description: Example program, to compile with MPI
 */
#include <stdio.h>
#include <mpi.h>
main(int argc, char **argv)
{
  int node, i, j;
  float f;
  MPI_Init(&argc,&argv);
  MPI_Comm_rank(MPI_COMM_WORLD, &node);
   
  printf("Hello World from Node %d.\n", node);
  for (i=0; i<=100000; i++)
    f=i*2.718281828*i+i+i*3.141592654;
  MPI_Finalize();
}
The "mpi_hello.c" program is a simple source file, written in C with MPI
library calls.
Then, check the command line options for *"mpicc" (GNU C-Compiler with
MPI extensions)*, then we compile and list the contents of the directory
again:
mpicc --help
mpicc -o mpihello mpihello.c
ls -l
A new file "hello" has been created. Note that this program has
"execute" rights.
Let's test this program on the "login" node first:
$ ./mpihello
Hello World from Node 0.
It seems to work, now run it on the HPC.
qsub mpihello.pbs
Compiling a parallel program in Intel Parallel Studio Cluster Edition
We will now compile the same program, but using the Intel Parallel
Studio Cluster Edition compilers. We stay in the examples directory for
this chapter:
cd ~/examples/Compiling-and-testing-your-software-on-the-HPC
