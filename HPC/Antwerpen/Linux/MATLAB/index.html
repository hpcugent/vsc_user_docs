
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.3.9">
    
    
      
        <title>MATLABs - VSC User Documentation - Antwerpen (Linux)</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#matlabs" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="VSC User Documentation - Antwerpen (Linux)" class="md-header__button md-logo" aria-label="VSC User Documentation - Antwerpen (Linux)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            VSC User Documentation - Antwerpen (Linux)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              MATLABs
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="VSC User Documentation - Antwerpen (Linux)" class="md-nav__button md-logo" aria-label="VSC User Documentation - Antwerpen (Linux)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    VSC User Documentation - Antwerpen (Linux)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../introduction/" class="md-nav__link">
        Introduction to HPC
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../account/" class="md-nav__link">
        Getting an HPC Account
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../connecting/" class="md-nav__link">
        Connecting to the HPC infrastructure
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../running_batch_jobs/" class="md-nav__link">
        Running batch jobs
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../running_interactive_jobs/" class="md-nav__link">
        Running interactive jobs
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../running_jobs_with_input_output_data/" class="md-nav__link">
        Running jobs with input/output data
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../multi_core_jobs/" class="md-nav__link">
        Multi core jobs/Parallel Computing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../web_portal/" class="md-nav__link">
        Using the HPC-UGent web portal
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../xdmod/" class="md-nav__link">
        XDMoD portal
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../sites/hpc_policies/" class="md-nav__link">
        HPC Policies
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../FAQ/" class="md-nav__link">
        Frequently Asked Questions
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_13" type="checkbox" id="__nav_13" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_13">
          Advanced topics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Advanced topics" data-md-level="1">
        <label class="md-nav__title" for="__nav_13">
          <span class="md-nav__icon md-icon"></span>
          Advanced topics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fine_tuning_job_specifications/" class="md-nav__link">
        Fine-tuning Job Specifications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../multi_job_submission/" class="md-nav__link">
        Multi-job submission
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../compiling_your_software/" class="md-nav__link">
        Compiling and testing your software on the HPC
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../program_examples/" class="md-nav__link">
        Program examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../jobscript_examples/" class="md-nav__link">
        Job script examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../best_practices/" class="md-nav__link">
        Best Practices
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_14" type="checkbox" id="__nav_14" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_14">
          Appendices
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Appendices" data-md-level="1">
        <label class="md-nav__title" for="__nav_14">
          <span class="md-nav__icon md-icon"></span>
          Appendices
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../quick_reference_guide/" class="md-nav__link">
        Appendix A - HPC Quick Reference Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../torque_options/" class="md-nav__link">
        Appendix B - TORQUE options
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../useful_linux_commands/" class="md-nav__link">
        Appendix C - Useful Linux Commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#why-is-the-matlab-compiler-required" class="md-nav__link">
    Why is the MATLAB compiler required?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-compile-matlab-code" class="md-nav__link">
    How to compile MATLAB code
  </a>
  
    <nav class="md-nav" aria-label="How to compile MATLAB code">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#libraries" class="md-nav__link">
    Libraries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-issues-during-compilation" class="md-nav__link">
    Memory issues during compilation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multithreading" class="md-nav__link">
    Multithreading
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#java-output-logs" class="md-nav__link">
    Java output logs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cache-location" class="md-nav__link">
    Cache location
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#matlab-job-script" class="md-nav__link">
    MATLAB job script
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="matlabs">MATLABs<a class="headerlink" href="#matlabs" title="Permanent link">#</a></h1>
<h2 id="why-is-the-matlab-compiler-required">Why is the MATLAB compiler required?<a class="headerlink" href="#why-is-the-matlab-compiler-required" title="Permanent link">#</a></h2>
<p>The main reason behind this alternative way of using MATLAB is
licensing: only a limited number of MATLAB sessions can be active at the
same time. However, once the MATLAB program is compiled using the MATLAB
compiler, the resulting stand-alone executable can be run without
needing to contact the license server.</p>
<p>Note that a license is required for the MATLAB Compiler, see
<a href="https://nl.mathworks.com/help/compiler/index.html">https://nl.mathworks.com/help/compiler/index.html</a>. If the <code>mcc</code>
command is provided by the MATLAB installation you are using, the MATLAB
compiler can be used as explained below.</p>
<h2 id="how-to-compile-matlab-code">How to compile MATLAB code<a class="headerlink" href="#how-to-compile-matlab-code" title="Permanent link">#</a></h2>
<p>Compiling MATLAB code can only be done from the login nodes, because
only login nodes can access the MATLAB license server, workernodes on
clusters can not.</p>
<p>To access the MATLAB compiler, the <code>MATLAB</code> module should be loaded
first. Make sure you are using the same <code>MATLAB</code> version to compile and
to run the compiled MATLAB program.</p>
<pre><code>$ <b>module avail MATLAB</b>
----------------------/apps/gent/victini/modules/all----------------------
   MATLAB/2016b    MATLAB/2017b    MATLAB/2018a (D)
$ <b>module load MATLAB/2018a</b>
</code></pre>

<p>After loading the <code>MATLAB</code> module, the <code>mcc</code> command can be used. To get
help on <code>mcc</code>, you can run <code>mcc -?</code>.</p>
<p>To compile a standalone application, the <code>-m</code> flag is used (the <code>-v</code>
flag means verbose output). To show how <code>mcc</code> can be used, we use the
<code>magicsquare</code> example that comes with MATLAB.</p>
<p>First, we copy the <code>magicsquare.m</code> example that comes with MATLAB to
<code>example.m</code>:</p>
<pre><code>$ <b>cp $EBROOTMATLAB/extern/examples/compiler/magicsquare.m example.m</b>
</code></pre>

<p>To compile a MATLAB program, use <code>mcc -mv</code>:</p>
<pre><code><b>mcc -mv example.m</b>
Opening log file:  /user/antwerpen/201/vsc20167/java.log.34090
Compiler version: 6.6 (R2018a)
Dependency analysis by REQUIREMENTS.
Parsing file "/user/antwerpen/201/vsc20167/example.m"
    (Referenced from: "Compiler Command Line").
Deleting 0 temporary MEX authorization files.
Generating file "/user/antwerpen/201/vsc20167/readme.txt".
Generating file "run\_example.sh".
</code></pre>

<h3 id="libraries">Libraries<a class="headerlink" href="#libraries" title="Permanent link">#</a></h3>
<p>To compile a MATLAB program that <em>needs a library</em>, you can use the
<code>-I library_path</code> flag. This will tell the compiler to also look for
files in <code>library_path</code>.</p>
<p>It's also possible to use the <code>-a path</code> flag. That will result in all
files under the <code>path</code> getting added to the final executable.</p>
<p>For example, the command <code>mcc -mv example.m -I examplelib -a datafiles</code>
will compile <code>example.m</code> with the MATLAB files in <code>examplelib</code>, and will
include all files in the <code>datafiles</code> directory in the binary it
produces.</p>
<h3 id="memory-issues-during-compilation">Memory issues during compilation<a class="headerlink" href="#memory-issues-during-compilation" title="Permanent link">#</a></h3>
<p>If you are seeing Java <abbr title="A quantity of physical memory (RAM). Memory is provided by compute nodes. It is required as a constraint or consumed as a consumable resource by jobs. Within Moab, memory is tracked and reported in megabytes (MB).">memory</abbr> issues during the compilation of your
MATLAB program on the login nodes, consider tweaking the default maximum
heap size (128M) of Java using the <code>_JAVA_OPTIONS</code> environment variable
with:</p>
<pre><code>$ <b>export _JAVA_OPTIONS="-Xmx64M"</b>
</code></pre>

<p>The MATLAB compiler spawns multiple Java processes, and because of the
default <abbr title="A quantity of physical memory (RAM). Memory is provided by compute nodes. It is required as a constraint or consumed as a consumable resource by jobs. Within Moab, memory is tracked and reported in megabytes (MB).">memory</abbr> limits that are in effect on the login nodes, this might
lead to a crash of the compiler if it's trying to create to many Java
processes. If we lower the heap size, more Java processes will be able
to fit in <abbr title="A quantity of physical memory (RAM). Memory is provided by compute nodes. It is required as a constraint or consumed as a consumable resource by jobs. Within Moab, memory is tracked and reported in megabytes (MB).">memory</abbr>.</p>
<p>Another possible issue is that the heap size is too small. This could
result in errors like:</p>
<pre><code>Error: Out of memory
</code></pre>

<p>A possible solution to this is by setting the maximum heap size to be
bigger:</p>
<pre><code>$ <b>export _JAVA_OPTIONS="-Xmx512M"</b>
</code></pre>

<h2 id="multithreading">Multithreading<a class="headerlink" href="#multithreading" title="Permanent link">#</a></h2>
<p>MATLAB can only use the cores in a single workernode (unless the
Distributed Computing toolbox is used, see
<a href="https://nl.mathworks.com/products/distriben.html">https://nl.mathworks.com/products/distriben.html</a>).</p>
<p>The amount of workers used by MATLAB for the parallel toolbox can be
controlled via the <code>parpool</code> function: <code>parpool(16)</code> will use 16
workers. It's best to specify the amount of workers, because otherwise
you might not harness the full compute power available (if you have too
few workers), or you might negatively impact performance (if you have
too much workers). By default, MATLAB uses a fixed number of workers
(12).</p>
<p>You should use a number of workers that is equal to the number of cores
you requested when submitting your job script (the <code>ppn</code> value, see <a href="../running_batch_jobs/#generic-resource-requirements">Generic resource requirements</a>).
You can determine the right number of workers to use via the following
code snippet in your MATLAB program:</p>
<div style="text-align: center;">-- parpool.m --</div>
<div class="highlight"><pre><span></span><code><span class="c">% specify the right number of workers (as many as there are cores available in the job) when creating the parpool</span><span class="w"></span>
<span class="n">c</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">parcluster</span><span class="p">(</span><span class="s">&#39;local&#39;</span><span class="p">)</span><span class="w"></span>
<span class="n">pool</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">parpool</span><span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">NumWorkers</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>See also <a href="https://nl.mathworks.com/help/distcomp/parpool.html">the parpool
documentation</a>.</p>
<h2 id="java-output-logs">Java output logs<a class="headerlink" href="#java-output-logs" title="Permanent link">#</a></h2>
<p>Each time MATLAB is executed, it generates a Java log file in the users
home directory. The output log directory can be changed using:</p>
<pre><code>$ <b>MATLAB_LOG_DIR=<i>&lt;OUTPUT_DIR&gt;</i></b>
</code></pre>

<p>where <code>&lt;OUTPUT_DIR&gt;</code> is the name of the desired output directory. To
create and use a temporary directory for these logs:</p>
<pre><code># create unique temporary directory in $TMPDIR (or /tmp/$USER if
$TMPDIR is not defined)
# instruct MATLAB to use this directory for log files by setting $MATLAB_LOG_DIR
$ <b> export MATLAB_LOG_DIR=$ (mktemp -d -p $TMPDIR:-/tmp/$USER)</b>
</code></pre>

<p>You should remove the directory at the end of your job script:</p>
<pre><code>$ <b> rm -rf $MATLAB_LOG_DIR</b>
</code></pre>

<h2 id="cache-location">Cache location<a class="headerlink" href="#cache-location" title="Permanent link">#</a></h2>
<p>When running, MATLAB will use a cache for performance reasons. This
location and size of this cache can be changed trough the
<code>MCR_CACHE_ROOT</code> and <code>MCR_CACHE_SIZE</code> environment variables.</p>
<p>The snippet below would set the maximum cache size to 1024MB and the
location to <code>/tmp/testdirectory</code>.</p>
<pre><code>$ <b>export MATLAB_CACHE_ROOT=/tmp/testdirectory </b>
$ <b>export MATLAB_CACHE_SIZE=1024M </b>
</code></pre>

<p>So when MATLAB is running, it can fill up to 1024MB of cache in
<code>/tmp/testdirectory</code>.</p>
<h2 id="matlab-job-script">MATLAB job script<a class="headerlink" href="#matlab-job-script" title="Permanent link">#</a></h2>
<p>All of the tweaks needed to get MATLAB working have been implemented in
an example job script. This job script is also available on the <abbr title="High Performance Computing, high performance computing and multiple-task computing on a supercomputer.">HPC</abbr>.</p>
<!-- %TODO: where? -->

<div style="text-align: center;">-- jobscript.sh --</div>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1">#PBS -l nodes=1:ppn=1</span>
<span class="c1">#PBS -l walltime=1:0:0</span>
<span class="c1">#</span>
<span class="c1"># Example (single-core) MATLAB job script</span>
<span class="c1"># see http://hpcugent.github.io/vsc_user_docs/</span>
<span class="c1">#</span>

<span class="c1"># make sure the MATLAB version matches with the one used to compile the MATLAB program!</span>
module load MATLAB/2018a

<span class="c1"># use temporary directory (not $HOME) for (mostly useless) MATLAB log files</span>
<span class="c1"># subdir in $TMPDIR (if defined, or /tmp otherwise)</span>
<span class="nb">export</span> <span class="nv">MATLAB_LOG_DIR</span><span class="o">=</span><span class="k">$(</span>mktemp -d -p  <span class="si">${</span><span class="nv">TMPDIR</span><span class="k">:-</span><span class="p">/tmp</span><span class="si">}</span><span class="k">)</span>

<span class="c1"># configure MATLAB Compiler Runtime cache location &amp; size (1GB)</span>
<span class="c1"># use a temporary directory in /dev/shm (i.e. in memory) for performance reasons</span>
<span class="nb">export</span> <span class="nv">MCR_CACHE_ROOT</span><span class="o">=</span><span class="k">$(</span>mktemp -d -p /dev/shm<span class="k">)</span>
<span class="nb">export</span> <span class="nv">MCR_CACHE_SIZE</span><span class="o">=</span>1024MB

<span class="c1"># change to directory where job script was submitted from</span>
<span class="nb">cd</span> <span class="nv">$PBS_O_WORKDIR</span>

<span class="c1"># run compiled example MATLAB program &#39;example&#39;, provide &#39;5&#39; as input argument to the program</span>
<span class="c1"># $EBROOTMATLAB points to MATLAB installation directory</span>
./run_example.sh <span class="nv">$EBROOTMATLAB</span> <span class="m">5</span>
</code></pre></div>

              
            </article>
            
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.top", "navigation.expand", "navigation.tracking", "toc.follow", "navigation.sections", "navigation.instant", "search.suggest", "search.highlight"], "search": "../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.6c7ad80a.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>